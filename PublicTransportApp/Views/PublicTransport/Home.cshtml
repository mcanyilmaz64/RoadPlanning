@{
    ViewData["Title"] = "Koordinat Girişi";
  //  Layout = null;
}
<head>

@* <style>
    body {
        font-family: Arial, sans-serif;
        background-color: #f4f4f9;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        margin: 0;
    }

    .container {
        background-color: #fff;
        padding: 20px 40px;
        border-radius: 10px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        width: 100%;
        max-width: 600px;
    }

    h2 {
        text-align: center;
        margin-bottom: 20px;
        color: #333;
    }

    .form-group {
        margin-bottom: 15px;
    }

    label {
        font-weight: bold;
        margin-bottom: 5px;
        display: block;
    }

    input[type="text"] {
        width: 100%;
        padding: 8px;
        margin-bottom: 10px;
        border: 1px solid #ccc;
        border-radius: 5px;
        box-sizing: border-box;
    }

    .btn {
        background-color: #007bff;
        color: white;
        border: none;
        padding: 10px 15px;
        border-radius: 5px;
        cursor: pointer;
        width: 100%;
    }

    .btn:hover {
        background-color: #0056b3;
    }

    .alert {
        text-align: center;
        color: green;
        margin-bottom: 15px;
    }
</style> *@
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <style>
        img.huechange {
            filter: hue-rotate(120deg);
        }

    </style>
</head>

<body>

    <div class="container py-5">
        <h2 class="text-center mb-4">Koordinat Seçimi</h2>

        <div class="row">
            <div class="col-md-6">
                <div id="map" style="height: 400px; width: 100%;"></div>
            </div>

            <div class="col-md-6 d-flex flex-column justify-content-between">
                <form method="post" asp-action="SaveCoordinates">
                    <h4>Başlangıç Koordinatları</h4>
                    <div class="mb-3">
                        <label for="startLat" class="form-label">Enlem</label>
                        <input type="text" id="startLat" name="startLat" class="form-control" readonly>
                        <label for="startLon" class="form-label mt-2">Boylam</label>
                        <input type="text" id="startLon" name="startLon" class="form-control" readonly>
                    </div>

                    <h4>Hedef Koordinatları</h4>
                    <div class="mb-3">
                        <label for="destLat" class="form-label">Enlem</label>
                        <input type="text" id="destLat" name="destLat" class="form-control" readonly>
                        <label for="destLon" class="form-label mt-2">Boylam</label>
                        <input type="text" id="destLon" name="destLon" class="form-control" readonly>
                    </div>

                    <button type="submit" class="btn btn-primary w-100">Koordinatları Kaydet</button>
                </form>
            </div>
        </div>
    </div>

    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>

    <script>
        var map = L.map('map').setView([40.77160, 29.96010], 16);

        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; OpenStreetMap contributors'
        }).addTo(map);

        var startMarker = L.marker([40.77160, 29.96010], { draggable: true }).addTo(map)
            .bindPopup('Başlangıç Konumu').openPopup();

        document.getElementById('startLat').value = 40.77160;
        document.getElementById('startLon').value = 29.96010;


                var greenIcon = L.icon({
                iconUrl: 'leaf-green.png',
        shadowUrl: 'leaf-shadow.png',

            iconSize:     [38, 95], // size of the icon
            shadowSize:   [50, 64], // size of the shadow
            iconAnchor:   [22, 94], // point of the icon which will correspond to marker's location
            shadowAnchor: [4, 62],  // the same for the shadow
            popupAnchor:  [-3, -76] // point from which the popup should open relative to the iconAnchor
        });



        var destMarker;

        map.on('click', function (e) {
            if (!destMarker) {

        destMarker = L.marker(e.latlng,{icon: greenIcon}, { draggable: true }).addTo(map)
                     .bindPopup('Hedef Konumu').openPopup();



                 document.getElementById('destLat').value = e.latlng.lat;
                document.getElementById('destLon').value = e.latlng.lng;
            }
            else {
               map.removeLayer(destMarker);
                document.getElementById('destLat').value = e.latlng.lat;
                document.getElementById('destLon').value = e.latlng.lng;
                 destMarker = L.marker(e.latlng, { draggable: true }).addTo(map)
                    .bindPopup('Hedef Konumu').openPopup();
                    destMarker._icon.classList.add("huechange");

            }
        });
    </script>
    <script src="https://kit.fontawesome.com/363773f36f.js" crossorigin="anonymous"></script>

</body>